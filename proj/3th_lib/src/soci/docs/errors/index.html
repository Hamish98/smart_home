<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Errors - SOCI (4.1.2)</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">SOCI (4.1.2)</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Overview</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../quickstart/" class="dropdown-item">Getting Started</a>
</li>
                                    
<li>
    <a href="../installation/" class="dropdown-item">Installation</a>
</li>
                                    
<li>
    <a href="../structure/" class="dropdown-item">Library Structure</a>
</li>
                                    
<li>
    <a href="../license/" class="dropdown-item">License</a>
</li>
                                    
<li>
    <a href="../faq/" class="dropdown-item">FAQ</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">User Guide</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../connections/" class="dropdown-item">Connections</a>
</li>
                                    
<li>
    <a href="../queries/" class="dropdown-item">Queries</a>
</li>
                                    
<li>
    <a href="../binding/" class="dropdown-item">Data Binding</a>
</li>
                                    
<li>
    <a href="../indicators/" class="dropdown-item">Data Indicators</a>
</li>
                                    
<li>
    <a href="../types/" class="dropdown-item">Data Types</a>
</li>
                                    
<li>
    <a href="../lobs/" class="dropdown-item">LOBs</a>
</li>
                                    
<li>
    <a href="../statements/" class="dropdown-item">Statements</a>
</li>
                                    
<li>
    <a href="../transactions/" class="dropdown-item">Transactions</a>
</li>
                                    
<li>
    <a href="../procedures/" class="dropdown-item">Procedures</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Errors</a>
</li>
                                    
<li>
    <a href="../logging/" class="dropdown-item">Logging</a>
</li>
                                    
<li>
    <a href="../interfaces/" class="dropdown-item">Interfaces</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Backends</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../backends/" class="dropdown-item">Features</a>
</li>
                                    
<li>
    <a href="../backends/db2/" class="dropdown-item">DB2</a>
</li>
                                    
<li>
    <a href="../backends/firebird/" class="dropdown-item">Firebird</a>
</li>
                                    
<li>
    <a href="../backends/mysql/" class="dropdown-item">MySQL</a>
</li>
                                    
<li>
    <a href="../backends/odbc/" class="dropdown-item">ODBC</a>
</li>
                                    
<li>
    <a href="../backends/oracle/" class="dropdown-item">Oracle</a>
</li>
                                    
<li>
    <a href="../backends/postgresql/" class="dropdown-item">PostgreSQL</a>
</li>
                                    
<li>
    <a href="../backends/sqlite3/" class="dropdown-item">SQLite3</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Miscellaneous</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../beyond/" class="dropdown-item">Beyond SQL</a>
</li>
                                    
<li>
    <a href="../multithreading/" class="dropdown-item">Multi-threading</a>
</li>
                                    
<li>
    <a href="../boost/" class="dropdown-item">Boost</a>
</li>
                                    
<li>
    <a href="../utilities/" class="dropdown-item">Utilities</a>
</li>
                                    
<li>
    <a href="../vagrant/" class="dropdown-item">Vagrant</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">API</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../api/client/" class="dropdown-item">Client API</a>
</li>
                                    
<li>
    <a href="../api/backend/" class="dropdown-item">Backend API</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Ada</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../languages/ada/" class="dropdown-item">Ada Bindings</a>
</li>
            
<li>
    <a href="../languages/ada/concepts/" class="dropdown-item">Ada Concepts</a>
</li>
            
<li>
    <a href="../languages/ada/idioms/" class="dropdown-item">Ada Idioms</a>
</li>
            
<li>
    <a href="../languages/ada/reference/" class="dropdown-item">Ada API Reference</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../procedures/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../logging/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/SOCI/soci/edit/master/docs/errors.md" class="nav-link"><i class="fa-brands fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#errors" class="nav-link">Errors</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#backend-specific-errors" class="nav-link">Backend-specific errors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#firebird" class="nav-link">Firebird</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#mysql" class="nav-link">MySQL</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#odbc" class="nav-link">ODBC</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#oracle" class="nav-link">Oracle</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#postgresql" class="nav-link">PostgreSQL</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#sqlite" class="nav-link">SQLite</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="errors">Errors</h1>
<p>All DB-related errors manifest themselves as exceptions of type <code>soci_error</code>, which is derived from <code>std::runtime_error</code>.
This allows to handle database errors within the standard exception framework:</p>
<pre><code class="language-cpp">int main()
{
    try
    {
        // regular code
    }
    catch (std::exception const &amp; e)
    {
        cerr &lt;&lt; &quot;Bang! &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
}
</code></pre>
<p>The <code>soci_error</code> class exposes the following public functions:</p>
<p>The <code>get_error_message() const</code> function returns <code>std::string</code> with a brief error message, without any additional information that can be present in the full error message returned by <code>what()</code>.</p>
<p>The <code>get_error_category() const</code> function returns one of the <code>error_category</code> enumeration values, which allows the user to portably react to some subset of common errors.
For example, <code>connection_error</code> or <code>constraint_violation</code> have meanings that are common across different database backends, even though the actual mechanics might differ.
Please note that error categories are not universally supported and there is no claim that all possible errors that are reported by the database server are covered or interpreted. If the error category is not recognized by the backend, it defaults to <code>unknown</code>.</p>
<h2 id="backend-specific-errors">Backend-specific errors</h2>
<p>Some errors originate in SOCI itself, while others are thrown by the database-specific backend and may contain extra information about the error provided by the database itself. <code>soci_error</code> provides <code>get_backend_name()</code> function which returns a non-empty string with the name of the backend that threw the error to distinguish such errors from the errors generated by SOCI itself, for which this function returns an empty string.</p>
<p>For the backend-specific errors, either <code>get_backend_error_code()</code>, returning backend-specific integer error code, or <code>get_sqlstate()</code>, returning a 5 character string describing the error in more details, can be used to identify the error more precisely. <code>get_backend_error_code()</code> returns 0 if integer error codes are not supported by the backend and <code>get_sqlstate()</code> returns an empty string if the backend doesn't provide <code>SQLSTATE</code>, please see the backend-specific sections below for more details.</p>
<p>These functions can be used without including the backend-specific headers, but this means that the backend name string must be checked manually, instead of relying on catching the correct exception class. Here is an example of doing it:</p>
<pre><code class="language-cpp">#include &lt;soci/soci.h&gt;

#include &lt;iostream&gt;

using namespace std;

int main()
{
    try
    {
        // code using SOCI
    }
    catch (soci::exception const &amp; e)
    {
        std::string const backend = e.get_backend_name();
        if ( backend == &quot;postgresql&quot; )
        {
            if ( e.get_sqlstate() == &quot;54001&quot; )
            {
                // Handle PostgreSQL &quot;Statement too complex&quot; error.
            }
        }
        else if ( backend == &quot;sqlite3&quot; )
        {
            if ( e.get_backend_error_code() == 18 /* SQLITE_TOOBIG */ )
            {
                // Handle SQLite &quot;Statement too long&quot; error.
            }
        }
        else
        {
            cerr &lt;&lt; &quot;Some other error: &quot; &lt;&lt; e.what() &lt;&lt; endl;
        }
    }
}
</code></pre>
<h2 id="firebird">Firebird</h2>
<p>The Firebird backend can throw instances of the <code>firebird_soci_error</code>, which is publicly derived from <code>soci_error</code> and overrides <code>get_backend_error_code()</code> to return the first Firebird status code, if available, or 0 otherwise. This exception class also has a public member field <code>status_</code> which is a vector containing all status codes associated with the error:</p>
<pre><code class="language-cpp">#include &lt;soci/soci.h&gt;
#include &lt;soci/firebird/soci-firebird.h&gt;

int main()
{
    try
    {
        // regular code
    }
    catch (soci::firebird_soci_error const &amp; e)
    {
        cerr &lt;&lt; &quot;Firebird error: &quot; &lt;&lt; e.get_backend_error_code()
            &lt;&lt; &quot; &quot; &lt;&lt; e.what() &lt;&lt; endl;

        // If necessary, e.status_ vector may be examined for additional status codes.
    }
    catch (soci::exception const &amp; e)
    {
        cerr &lt;&lt; &quot;Some other error: &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
}
</code></pre>
<h2 id="mysql">MySQL</h2>
<p>The MySQL backend can throw instances of the <code>mysql_soci_error</code>, which is publicly derived from <code>soci_error</code> and overrides <code>get_backend_error_code()</code> to return the MySQL error code (as returned by <code>mysql_errno()</code>):</p>
<pre><code class="language-cpp">#include &lt;soci/soci.h&gt;
#include &lt;soci/mysql/soci-mysql.h&gt;

int main()
{
    try
    {
        // regular code
    }
    catch (soci::mysql_soci_error const &amp; e)
    {
        cerr &lt;&lt; &quot;MySQL error: &quot; &lt;&lt; e.get_backend_error_code()
            &lt;&lt; &quot; &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
    catch (soci::exception const &amp; e)
    {
        cerr &lt;&lt; &quot;Some other error: &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
}
</code></pre>
<h2 id="odbc">ODBC</h2>
<p>The ODBC backend can throw instances of the <code>odbc_soci_error</code>, which is publicly derived from <code>soci_error</code> and overrides both <code>get_backend_error_code()</code> and <code>get_sqlstate()</code> to return the numeric ODBC error and <code>SQLSTATE</code> associated with it, respectively:</p>
<pre><code class="language-cpp">#include &lt;soci/soci.h&gt;
#include &lt;soci/odbc/soci-odbc.h&gt;

int main()
{
    try
    {
        // regular code
    }
    catch (soci::odbc_soci_error const &amp; e)
    {
        cerr &lt;&lt; &quot;ODBC error: &quot; &lt;&lt; e.get_backend_error_code()
            &lt;&lt; &quot; &quot; &lt;&lt; e.get_sqlstate() &lt;&lt; &quot; &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
    catch (soci::exception const &amp; e)
    {
        cerr &lt;&lt; &quot;Some other error: &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
}
</code></pre>
<h2 id="oracle">Oracle</h2>
<p>The Oracle backend can throw the instances of the <code>oracle_soci_error</code>, which is publicly derived from <code>soci_error</code> and overrides <code>get_backend_error_code()</code> to return the Oracle error code:</p>
<pre><code class="language-cpp">#include &lt;soci/soci.h&gt;
#include &lt;soci/oracle/soci-oracle.h&gt;

int main()
{
    try
    {
        // regular code
    }
    catch (soci::oracle_soci_error const &amp; e)
    {
        cerr &lt;&lt; &quot;Oracle error: &quot; &lt;&lt; e.get_backend_error_code()
            &lt;&lt; &quot; &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
    catch (soci::exception const &amp; e)
    {
        cerr &lt;&lt; &quot;Some other error: &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
}
</code></pre>
<h2 id="postgresql">PostgreSQL</h2>
<p>The PostgreSQL backend can throw the instances of the <code>postgresql_soci_error</code>, which is publicly derived from <code>soci_error</code> and overrides <code>get_sqlstate()</code> member function to return PostgreSQL native error code, which is a 5 character <code>SQLSTATE</code> string.</p>
<pre><code class="language-cpp">#include &lt;soci/soci.h&gt;
#include &lt;soci/postgresql/soci-postgresql.h&gt;

int main()
{
    try
    {
        // regular code
    }
    catch (soci::postgresql_soci_error const &amp; e)
    {
        cerr &lt;&lt; &quot;PostgreSQL error: &quot; &lt;&lt; e.get_sqlstate()
            &lt;&lt; &quot; &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
    catch (soci::exception const &amp; e)
    {
        cerr &lt;&lt; &quot;Some other error: &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
}
</code></pre>
<h2 id="sqlite">SQLite</h2>
<p>The SQLite backend can throw the instances of the <code>sqlite3_soci_error</code>, which is publicly derived from <code>soci_error</code> and overrides <code>get_backend_error_code()</code> to return the (possibly extended) SQLite result code:</p>
<pre><code class="language-cpp">#include &lt;soci/soci.h&gt;
#include &lt;soci/sqlite3/soci-sqlite3.h&gt;

int main()
{
    try
    {
        // regular code
    }
    catch (soci::sqlite3_soci_error const &amp; e)
    {
        cerr &lt;&lt; &quot;SQLite error: &quot; &lt;&lt; e.get_backend_error_code()
            &lt;&lt; &quot; &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
    catch (soci::exception const &amp; e)
    {
        cerr &lt;&lt; &quot;Some other error: &quot; &lt;&lt; e.what() &lt;&lt; endl;
    }
}
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2017-2025 <a href="https://soci.sourceforge.net/people.html">SOCI Team</a>.</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
